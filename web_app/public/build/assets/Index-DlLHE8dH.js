import{d as b,o as l,c as $,b as s,w as i,f as I,t as T,u as t,l as K,a,e as p,i as u,r as h,n as j,F as V,g as z,h as o,Z as B}from"./app-B5CcyOQh.js";import{_ as H,a as U}from"./index-g8tBwMt1.js";import{_ as D}from"./Input.vue_vue_type_script_setup_true_lang-DU8YdqNF.js";import{_ as N,O as R}from"./DataTable.vue_vue_type_script_setup_true_lang--qKvFCwy.js";import{_ as L}from"./ComboBox.vue_vue_type_script_setup_true_lang-b28B6nDu.js";import{_ as v}from"./index-wEAVScDQ.js";import{C as A,R as M}from"./refresh-cw-CU4cqvxD.js";import{c as y}from"./createLucideIcon-B6QabdhO.js";import{_ as w}from"./index-Rg_zVHyN.js";import{B as E}from"./Backoffice-D98gt_DP.js";/* empty css            */import"./utils--eAPk3wG.js";import"./bundle-mjs-Dk7hgz7r.js";import"./index-CxhyNVB_.js";import"./shadcn-BWvbMO9Q.js";import"./Skeleton.vue_vue_type_script_setup_true_lang-Bag19oHy.js";import"./AlertTitle.vue_vue_type_script_setup_true_lang-CxJyDzx9.js";import"./TableRow.vue_vue_type_script_setup_true_lang-D5LjS1j3.js";import"./index-DdUZ0-Tg.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./store-Df1b8uYc.js";import"./circle-user-DqOS45ze.js";import"./badge-info-Do4edDqq.js";import"./triangle-alert-BhOUWwci.js";/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=y("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=y("ForwardIcon",[["polyline",{points:"15 17 20 12 15 7",key:"1w3sku"}],["path",{d:"M4 18v-2a4 4 0 0 1 4-4h12",key:"jmiej9"}]]);/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=y("HandCoinsIcon",[["path",{d:"M11 15h2a2 2 0 1 0 0-4h-3c-.6 0-1.1.2-1.4.6L3 17",key:"geh8rc"}],["path",{d:"m7 21 1.6-1.4c.3-.4.8-.6 1.4-.6h4c1.1 0 2.1-.4 2.8-1.2l4.6-4.4a2 2 0 0 0-2.75-2.91l-4.2 3.9",key:"1fto5m"}],["path",{d:"m2 16 6 6",key:"1pfhp9"}],["circle",{cx:"16",cy:"9",r:"2.9",key:"1n0dlu"}],["circle",{cx:"6",cy:"5",r:"3",key:"151irh"}]]);/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=y("PackageCheckIcon",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-vue-next v0.417.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=y("ReceiptTextIcon",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M14 8H8",key:"1l3xfs"}],["path",{d:"M16 12H8",key:"1fr5h0"}],["path",{d:"M13 16H8",key:"wsln4y"}]]),Q={class:"text-muted-foreground text-xs font-medium"},W=b({__name:"TransactionCode",props:{transaction:{}},setup(_){return(n,m)=>(l(),$("div",null,[s(t(K),{href:n.route("backoffice.transaction.detail",n.transaction.id),class:"font-semibold hover:underline hover:text-primary"},{default:i(()=>[I(T(n.transaction.transaction_code),1)]),_:1},8,["href"]),a("p",Q," Unit Layanan : "+T(n.transaction.shop),1)]))}}),X={class:"text-center"},Y=a("span",null,"menunggu di proses..",-1),ee=a("span",null,"pesanan sedang di proses..",-1),ae=a("span",null,"Menunggu pembayaran..",-1),te=a("span",null,"Transaksi Selesai",-1),se=b({__name:"TransactionStatus",props:{status:{}},setup(_){return(n,m)=>(l(),$("div",X,[n.status==="pesan"?(l(),p(t(v),{key:0,class:"bg-yellow-300 hover:bg-yellow-300 py-1 space-x-2 text-yellow-900 shadow-none"},{default:i(()=>[s(t(A),{class:"w-4 h-4"}),Y]),_:1})):u("",!0),n.status==="proses"?(l(),p(t(v),{key:1,class:"bg-green-300 hover:bg-green-300 py-1 space-x-2 text-green-900 shadow-none"},{default:i(()=>[s(t(M),{class:"w-4 h-4 animate-spin"}),ee]),_:1})):u("",!0),n.status==="selesai"?(l(),p(t(v),{key:2,class:"bg-green-300 hover:bg-green-300 py-1 space-x-2 text-green-900 shadow-none"},{default:i(()=>[s(t(q),{class:"w-4 h-4"}),ae]),_:1})):u("",!0),n.status==="dibayar"?(l(),p(t(v),{key:3,class:"bg-green-300 py-1 space-x-2 text-green-900 hover:bg-green-300 shadow-none"},{default:i(()=>[s(t(O),{class:"w-4 h-4"}),te]),_:1})):u("",!0)]))}}),ne={class:"text-center"},oe=a("span",null,"Proses Pesanan",-1),re=a("span",null,"Pesanan Selesai",-1),le=a("span",null,"Pesanan dibayar",-1),ie=a("span",null,"Cetak Invoice",-1),ce=b({__name:"TransactionButton",props:{transaction:{}},emits:["updated"],setup(_,{emit:n}){const m=_,C=n,f=h(!1),d=c=>{V.put(route("backoffice.transaction.update",m.transaction.id),{status:c},{onStart:()=>f.value=!0,onError:r=>console.log(r),onSuccess:()=>C("updated",!0),onFinish:()=>f.value=!1})},x=()=>{window.open(route("backoffice.transaction.invoice",m.transaction.id))};return(c,r)=>(l(),$("div",ne,[c.transaction.status==="pesan"?(l(),p(t(w),{key:0,class:"text-xs space-x-2",size:"xs",variant:"outline",onClick:r[0]||(r[0]=k=>d("proses"))},{default:i(()=>[s(t(M),{class:j([{"animate-spin":f.value},"h-3 w-3"])},null,8,["class"]),oe]),_:1})):u("",!0),c.transaction.status==="proses"?(l(),p(t(w),{key:1,class:"text-xs space-x-2",size:"xs",variant:"outline",onClick:r[1]||(r[1]=k=>d("selesai"))},{default:i(()=>[s(t(J),{class:"h-3 w-3"}),re]),_:1})):u("",!0),c.transaction.status==="selesai"?(l(),p(t(w),{key:2,class:"text-xs space-x-2",size:"xs",variant:"outline",onClick:r[2]||(r[2]=k=>d("dibayar"))},{default:i(()=>[s(t(Z),{class:"h-3 w-3"}),le]),_:1})):u("",!0),c.transaction.status==="dibayar"?(l(),p(t(w),{key:3,class:"text-xs space-x-2",size:"xs",variant:"outline",onClick:x},{default:i(()=>[s(t(G),{class:"h-3 w-3"}),ie]),_:1})):u("",!0)]))}}),pe={class:"space-y-2 mx-auto w-full"},ue={class:"space-y-2"},de={class:"flex items-center justify-between"},me={class:"text-lg font-semibold md:text-xl"},ge=a("div",{class:"flex gap-2"},null,-1),he={class:"w-full"},_e={class:"flex items-center justify-between py-4"},fe={class:"inline-flex items-center gap-3"},ye=a("p",{class:"text-xs font-medium"},"Data Perpage :",-1),xe={class:"grid grid-cols-[10%_90%] items-center bg-blue-100 py-2 rounded text-blue-800"},ke=a("p",{class:"text-left"},[a("strong",{class:"block"},"Keterangan :"),I(" Tidak terdapat pemesanan produk atau jasa. ")],-1),ve={layout:E},Ze=b({...ve,__name:"Index",props:{transactions:{},params:{}},setup(_){var S;const n=_,m=e=>new Intl.NumberFormat("en-ID",{style:"currency",currency:"IDR",maximumFractionDigits:0}).format(e),C=[{accessorKey:"transaction_code",header:({column:e})=>o("h2",{class:"w-full flex justify-between text-left px-0"},"Kode Transaksi"),cell:({row:e})=>o(W,{transaction:{id:e.original.id,transaction_code:e.original.transaction_code,shop:e.original.shop}},e.original.transaction_code)},{accessorKey:"customer",header:({column:e})=>o("h2",{class:"w-full flex justify-between text-left px-0"},"Pelanggan"),cell:({row:e})=>o("div",{class:"capitalize"},e.original.customer_name)},{accessorKey:"created_at",header:({column:e})=>o("h2",{class:"text-center"},"Tanggal Pesan"),cell:({row:e})=>o("div",{class:"text-center"},e.original.created_at)},{accessorKey:"item",header:({column:e})=>o("h2",{class:"w-full text-center px-0"},"Produk/Jasa"),cell:({row:e})=>o("div",{class:"text-center"},e.original.product_count+" Item")},{accessorKey:"status",header:({column:e})=>o("h2",{class:"text-center"},"Status"),cell:({row:e})=>o(se,{status:e.original.status})},{accessorKey:"total",header:({column:e})=>o("h2",{class:"w-full text-right px-0"},"Total"),cell:({row:e})=>o("div",{class:"text-right"},m(e.original.total))},{id:"actions",enableHiding:!1,cell:({row:e})=>(e.original.id,o(ce,{transaction:{id:e.original.id,status:e.original.status},onUpdated:()=>r(n.transactions.meta.current_page)}))}],f=h([{value:10,label:10},{value:25,label:25},{value:50,label:50},{value:100,label:100}]),d=h(!1),x=h((S=n.params)==null?void 0:S.search),c=h(null),r=e=>{const g=h({page:e,perPage:n.transactions.meta.per_page});V.get(route("backoffice.transaction.index","pesan"),g.value,{only:["transactions","params"],preserveState:!0,preserveScroll:!0,onStart:()=>d.value=!0,onFinish:()=>d.value=!1})},k=e=>r(e),F=()=>r(1);return(e,g)=>(l(),$(z,null,[s(t(B),{title:"Daftar Pemesanan"}),a("div",pe,[a("div",ue,[a("div",de,[a("h1",me,T(e.params.title),1),ge]),s(t(U),{class:"bg-secondary shadow-inner shadow-gray-100 max-w-2xl"},{default:i(()=>[s(t(H),{class:"text-xs"},{default:i(()=>[I(" Halaman untuk memanajemen Pemesanan yang terdapat pada setiap Unit Layanan di SMKN 1 Purwosari. ")]),_:1})]),_:1})]),a("div",he,[a("div",_e,[s(t(D),{placeholder:"Cari data...",modelValue:x.value,"onUpdate:modelValue":g[0]||(g[0]=P=>x.value=P),class:"w-1/2 bg-white"},null,8,["modelValue"]),a("div",fe,[ye,s(L,{lists:f.value,modelValue:e.transactions.meta.per_page,"onUpdate:modelValue":g[1]||(g[1]=P=>e.transactions.meta.per_page=P),onChange:F,class:"w-100"},null,8,["lists","modelValue"])])]),s(N,{ref_key:"transactionsTable",ref:c,columns:C,data:e.transactions.data,"current-page":e.transactions.meta.current_page,"last-page":e.transactions.meta.last_page,"prev-page":e.transactions.meta.current_page,"next-page":e.transactions.meta.to,total:e.transactions.meta.total,loading:d.value,"per-page":e.transactions.meta.per_page,onChangePage:k},{empty:i(()=>[a("div",xe,[a("div",null,[s(t(R),{class:"h-8 w-8 m-auto"})]),ke])]),_:1},8,["data","current-page","last-page","prev-page","next-page","total","loading","per-page"])])])],64))}});export{Ze as default};
