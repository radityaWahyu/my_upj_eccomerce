import{_ as I,a as P,b as j,c as z,d as G}from"./DialogFooter.vue_vue_type_script_setup_true_lang-DzEjCYr9.js";import{_ as J}from"./DialogDescription.vue_vue_type_script_setup_true_lang-CdfvzQwh.js";import{u as Q,F as y,_ as b,a as x,b as F,c as S,t as v,o as C,s as f,d as w}from"./vee-validate-zod.esm-CtXTeNYX.js";import{d as X,Q as Z,r as q,T as H,x as O,o as i,e as B,w as t,b as s,u as a,f as d,t as _,a as R,n as V,m as L,c,i as g}from"./app-B5CcyOQh.js";import{_ as T}from"./index-Rg_zVHyN.js";import{_ as W}from"./Input.vue_vue_type_script_setup_true_lang-DU8YdqNF.js";import{_ as Y}from"./Textarea.vue_vue_type_script_setup_true_lang-B98fCCEz.js";import{_ as aa,a as ea}from"./InputImage.vue_vue_type_script_setup_true_lang-DQ64XsgE.js";const sa={key:0,class:"text-xs text-red-500 font-medium"},ta={key:0,class:"text-xs text-red-500 font-medium"},na={key:0,class:"text-xs text-red-500 font-medium"},ra={key:0},oa={key:1},ia=1e6,ha=X({__name:"ShopForm",props:{open:{type:Boolean,default:!0},title:{default:"Tambah Unit Layanan"},shop:{},edit:{type:Boolean,default:!1}},emits:["closed","saved"],setup(A,{emit:K}){const o=A,h=K,N=Z();q(!1);const $=n=>{if((n==null?void 0:n.size)<=ia)return!0},M=o.edit?v(C({name:f({message:"Unit Layanan harus diisi"}).min(1,{message:"Unit Layanan harus diisi."}),address:f({message:"Alamat Kantor harus diisi"}).min(1,{message:"Alamat Kantor harus diisi."}),image:w().refine(n=>$(n),"Ukuran gambar maksimal 1MB.").optional()})):v(C({name:f({message:"Unit Layanan harus diisi"}).min(1,{message:"Unit Layanan harus diisi."}),address:f({message:"Alamat Kantor harus diisi"}).min(1,{message:"Alamat Kantor harus diisi."}),image:w().refine(n=>n,"Gambar harus diisi").refine(n=>$(n),"Ukuran gambar maksimal 1MB.")})),l=Q({validationSchema:M}),e=H({id:"",name:"",address:"",_token:N.props.csrf_token,image:""});O(()=>o.edit,n=>{n&&(e.name=o.shop.name,e.image=o.shop.image,e.address=o.shop.address,l.setFieldValue("name",o.shop.name),l.setFieldValue("address",o.shop.address))},{immediate:!0});const E=()=>{e.name="",e.address="",e.image="",l.setFieldValue("name","")},D=()=>{e.clearErrors(),l.resetForm,o.shop?window.history.back():h("closed",!0)},k=l.handleSubmit(n=>{o.edit?e.transform(r=>({...r,_method:"put"})).post(route("backoffice.shop.update",o.shop.id),{preserveState:!0,onSuccess:()=>{E(),h("saved",!0)}}):e.transform(r=>({...r,_method:"post"})).post(route("backoffice.shop.store"),{forceFormData:!0,onSuccess:()=>{h("saved",!0)}})});return(n,r)=>(i(),B(a(G),{open:n.open},{default:t(()=>[s(a(z),{class:"sm:max-w-[425px]"},{default:t(()=>{var U;return[s(a(I),null,{default:t(()=>[s(a(P),null,{default:t(()=>[d(_(n.title),1)]),_:1}),s(a(J),{class:"text-sm"},{default:t(()=>[d(" Unit Layanan dipergunakan untuk memanajemen Unit Pelayanan dan Jasa yang terdapat pada SMKN 1 Purwosari. Silahkan menginputkan data dengan benar. ")]),_:1})]),_:1}),R("form",{onSubmit:r[3]||(r[3]=(...m)=>a(k)&&a(k)(...m)),class:"space-y-2"},[s(a(y),{name:"name"},{default:t(({componentField:m})=>[s(a(b),null,{default:t(()=>[s(a(x),{class:V({"text-red-500":a(e).errors.name})},{default:t(()=>[d("Nama Unit")]),_:1},8,["class"]),s(a(F),null,{default:t(()=>[s(a(W),L({type:"text",placeholder:"Input nama unit"},m,{modelValue:a(e).name,"onUpdate:modelValue":r[0]||(r[0]=u=>a(e).name=u),class:{"border border-red-500":a(e).errors.name},disabled:a(e).processing}),null,16,["modelValue","class","disabled"])]),_:2},1024),a(e).errors.name?(i(),c("div",sa,_(a(e).errors.name),1)):g("",!0),s(a(S))]),_:2},1024)]),_:1}),s(a(y),{name:"address"},{default:t(({componentField:m})=>[s(a(b),null,{default:t(()=>[s(a(x),{class:V({"text-red-500":a(e).errors.address})},{default:t(()=>[d("Alamat Kantor")]),_:1},8,["class"]),s(a(F),null,{default:t(()=>[s(a(Y),L({placeholder:"inputkan alamat kantor"},m,{modelValue:a(e).address,"onUpdate:modelValue":r[1]||(r[1]=u=>a(e).address=u),class:"w-full"}),null,16,["modelValue"])]),_:2},1024),a(e).errors.address?(i(),c("div",ta,_(a(e).errors.address),1)):g("",!0),s(a(S))]),_:2},1024)]),_:1}),s(a(y),{name:"image"},{default:t(({componentField:m,field:u})=>[s(a(b),null,{default:t(()=>[s(a(x),{class:V({"text-red-500":a(e).errors.image})},{default:t(()=>[d("Gambar atau Logo Unit")]),_:1},8,["class"]),s(a(F),null,{default:t(()=>[s(aa,{class:"h-52",modelValue:a(e).image,"onUpdate:modelValue":r[2]||(r[2]=p=>a(e).image=p),onChange:p=>{a(e).image=p,u.onChange(p)},loading:a(e).processing},null,8,["modelValue","onChange","loading"])]),_:2},1024),a(e).errors.image?(i(),c("div",na,_(a(e).errors.image),1)):g("",!0),s(a(S))]),_:2},1024)]),_:1}),a(e).progress?(i(),B(a(ea),{key:0,value:(U=a(e).progress)==null?void 0:U.percentage,max:100,class:"w-full"},null,8,["value"])):g("",!0)],32),s(a(j),null,{default:t(()=>[s(a(T),{type:"button",variant:"ghost",form:"dialogForm",onClick:D,disabled:a(e).processing},{default:t(()=>[d(" Batal ")]),_:1},8,["disabled"]),s(a(T),{type:"submit",onClick:a(k),disabled:a(e).processing},{default:t(()=>[a(e).processing?(i(),c("span",ra,"Menyimpan data...")):(i(),c("span",oa,"Simpan"))]),_:1},8,["onClick","disabled"])]),_:1})]}),_:1})]),_:1},8,["open"]))}});export{ha as _};
