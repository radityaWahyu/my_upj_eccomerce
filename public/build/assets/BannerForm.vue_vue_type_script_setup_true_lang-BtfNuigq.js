import{_ as U,a as w,b as E,c as N,d as D}from"./DialogFooter.vue_vue_type_script_setup_true_lang-CXP3ZZtP.js";import{u as I,F as b,_ as h,a as k,b as y,c as x,t as J,o as z,s as M,d as j}from"./vee-validate-zod.esm-Bd9nk1EN.js";import{d as A,Q as L,T as P,o as n,e as $,w as t,b as s,u as e,f as m,a as Q,n as F,m as X,c as d,t as C,i as _}from"./app-DvwMCmTn.js";import{_ as S}from"./index-BzfR3-Sq.js";import{_ as Z}from"./Input.vue_vue_type_script_setup_true_lang-DFUkOyZW.js";import{_ as q,a as H}from"./InputImage.vue_vue_type_script_setup_true_lang-BBuP77CL.js";const K={key:0,class:"text-xs text-red-500 font-medium"},O={key:0,class:"text-xs text-red-500 font-medium"},R={key:0},W={key:1},Y=1e6,ie=A({__name:"BannerForm",props:{open:{type:Boolean}},emits:["closed","saved"],setup(ee,{emit:V}){const p=V,B=L(),v=o=>{if((o==null?void 0:o.size)<=Y)return!0},T=J(z({title:M({message:"Judul Gambar harus diisi"}).min(1,{message:"Judul Gambar harus diisi."}),image:j().refine(o=>o,"Gambar harus diisi").refine(o=>v(o),"Ukuran gambar maksimal 1MB.")})),f=I({validationSchema:T}),a=P({title:"",_token:B.props.csrf_token,image:""}),G=()=>{a.clearErrors(),f.resetForm(),p("closed",!0)},c=f.handleSubmit(o=>{a.post(route("backoffice.banner.store"),{forceFormData:!0,onSuccess:()=>{a.reset(),p("saved",!0)}})});return(o,r)=>(n(),$(e(D),{open:o.open},{default:t(()=>[s(e(N),{class:"sm:max-w-[425px]"},{default:t(()=>{var g;return[s(e(U),null,{default:t(()=>[s(e(w),{class:"font-medium"},{default:t(()=>[m("Tambah Gambar")]),_:1})]),_:1}),Q("form",{onSubmit:r[2]||(r[2]=(...l)=>e(c)&&e(c)(...l)),class:"space-y-2"},[s(e(b),{name:"title"},{default:t(({componentField:l})=>[s(e(h),null,{default:t(()=>[s(e(k),{class:F({"text-red-500":e(a).errors.title})},{default:t(()=>[m("Judul Banner")]),_:1},8,["class"]),s(e(y),null,{default:t(()=>[s(e(Z),X({type:"text",placeholder:"Input nama unit"},l,{modelValue:e(a).title,"onUpdate:modelValue":r[0]||(r[0]=u=>e(a).title=u),class:{"border border-red-500":e(a).errors.title},disabled:e(a).processing}),null,16,["modelValue","class","disabled"])]),_:2},1024),e(a).errors.title?(n(),d("div",K,C(e(a).errors.title),1)):_("",!0),s(e(x))]),_:2},1024)]),_:1}),s(e(b),{name:"image"},{default:t(({componentField:l,field:u})=>[s(e(h),null,{default:t(()=>[s(e(k),{class:F({"text-red-500":e(a).errors.image})},{default:t(()=>[m("Gambar")]),_:1},8,["class"]),s(e(y),null,{default:t(()=>[s(q,{class:"h-52",modelValue:e(a).image,"onUpdate:modelValue":r[1]||(r[1]=i=>e(a).image=i),onChange:i=>{e(a).image=i,u.onChange(i)},loading:e(a).processing},null,8,["modelValue","onChange","loading"])]),_:2},1024),e(a).errors.image?(n(),d("div",O,C(e(a).errors.image),1)):_("",!0),s(e(x))]),_:2},1024)]),_:1}),e(a).progress?(n(),$(e(H),{key:0,value:(g=e(a).progress)==null?void 0:g.percentage,max:100,class:"w-full"},null,8,["value"])):_("",!0)],32),s(e(E),null,{default:t(()=>[s(e(S),{type:"button",variant:"ghost",form:"dialogForm",onClick:G,disabled:e(a).processing},{default:t(()=>[m(" Batal ")]),_:1},8,["disabled"]),s(e(S),{type:"submit",onClick:e(c),disabled:e(a).processing},{default:t(()=>[e(a).processing?(n(),d("span",R,"Upload gambar...")):(n(),d("span",W,"Upload"))]),_:1},8,["onClick","disabled"])]),_:1})]}),_:1})]),_:1},8,["open"]))}});export{ie as _};
